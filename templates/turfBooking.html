<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/jpg" href="../static/images/favicon.ico"/>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">

    <title>Turf Booking</title>

    <style>
        body {
            background-color: #E8F6EF;
        }

        p {
            text-align: center;
        }

        .col:hover {
            background-color: pink;
        }

        .row {
            border: 1px solid blue;
        }

        .col {
            border: 1px solid blue;
        }
    </style>
</head>

<body>
    <p class="h6">Selected Date: {{ selectedDate }}</p>
    <p class="h1">Turf Timings</p>

    <form action="{% url 'turfBilling' %}" method="post">
        {% csrf_token %}

        <div class="container" style="border: 1px solid blue;">
            <input type="hidden" value="{{ selectedDate }}" name="date">
            <div class="btn-group mx-3 my-3" role="group">
                {% for i in time_slots %}
                    {% if list.i == '0' %}
                        <span id="{{ i }}">
                            <input type="checkbox" class="btn-check" id="btncheck{{ i }}" name="id" autocomplete="off" value="{{ i }}">
                            <label class="btn btn-outline-primary" for="btncheck{{ i }}">{{ i }}</label>
                        </span>
                    {% endif %}
                {% endfor %}
            </div>
            
            
        </div>

        <div class="container d-flex justify-content-end">
            <button type="submit" class="btn btn-primary">Proceed</button>
        </div>
    </form>

    <!-- Optional JavaScript -->
    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
        integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
        integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
        crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/1d8e01a44a.js" crossorigin="anonymous"></script>

    <script>
        let selectedDate = "{{ selectedDate }}";
        let currentDate = "{{ currentDate }}";
        var today = new Date();
        let currentTime = today.getHours() + ":" + today.getMinutes();
        let time = "";

        if (selectedDate === currentDate) {
            for (let i = 1; i <= 19; i++) {
                let timeSlot = new Date(today.setHours(i + 5, 0, 0)); // Adjusting for time slots starting from 6 am
                if (currentTime > timeSlot.toTimeString().substring(0, 5) && "{{ list[i] }}" === '0') {
                    document.getElementById(i).style.visibility = "hidden"; // Hide if past time and not booked
                }
            }
        }
    </script>
</body>

</html>
